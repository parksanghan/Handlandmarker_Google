 
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>TMAP ì§€ë„ì— ëŒ€ì¤‘êµí†µ ê²½ë¡œ í‘œì‹œ</title>
    <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=0BeLxmPc2W5oaSlKBNJsm5bIToGiFaSq7x8vhu7Y"></script>
    <style>
        #map_div { width: 100%; height: 600px; }
    </style>
</head>
<body>
    <div id="map_div"></div>
    <script>
        var map = new Tmapv2.Map("map_div", {
            center: new Tmapv2.LatLng(37.555162, 126.936928), // ì‹ ì´Œì—­ ì¤‘ì‹¬
            width: "100%",
            height: "600px",
            zoom: 14
        });

        // ğŸš€ TMAP ëŒ€ì¤‘êµí†µ API í˜¸ì¶œ
        fetch("https://apis.openapi.sk.com/transit/routes", {
            method: "POST",
            headers: {
                "Accept": "application/json",
                "Content-Type": "application/json",
                "appKey": "0BeLxmPc2W5oaSlKBNJsm5bIToGiFaSq7x8vhu7Y"
            },
            body: JSON.stringify({
                "startX": "126.936928",
                "startY": "37.555162",
                "endX": "127.029281",
                "endY": "37.564436"
            })
        })
        .then(response => response.json())
        .then(data => {
            console.log("API ì‘ë‹µ ë°ì´í„°:", data); // API ì‘ë‹µ í™•ì¸

            let path = [];

            // ğŸš€ API ì‘ë‹µì—ì„œ ê²½ë¡œ ë°ì´í„° ì¶”ì¶œ
            if (data.metaData.plan.itineraries.length > 0) {
                data.metaData.plan.itineraries[0].legs.forEach(leg => {
                    let legPath = [];

                    if (leg.passShape && leg.passShape.linestring) {
                        let coords = leg.passShape.linestring.split(" ");
                        coords.forEach(coord => {
                            let [lon, lat] = coord.split(",");
                            legPath.push(new Tmapv2.LatLng(parseFloat(lat), parseFloat(lon)));
                        });
                    }

                    // ğŸš¶ ë„ë³´: íŒŒë€ìƒ‰ ê²½ë¡œ
                    if (leg.mode === "WALK") {
                        new Tmapv2.Polyline({
                            path: legPath,
                            strokeColor: "#0000FF",
                            strokeWeight: 3,
                            map: map
                        });
                    }
                    // ğŸš ë²„ìŠ¤: ì´ˆë¡ìƒ‰ ê²½ë¡œ
                    else if (leg.mode === "BUS") {
                        new Tmapv2.Polyline({
                            path: legPath,
                            strokeColor: "#00FF00",
                            strokeWeight: 5,
                            map: map
                        });

                        // ğŸ ì •ë¥˜ì¥ ë§ˆì»¤ ì¶”ê°€
                        leg.passStopList.stationList.forEach(station => {
                            new Tmapv2.Marker({
                                position: new Tmapv2.LatLng(parseFloat(station.lat), parseFloat(station.lon)),
                                map: map,
                                label: `<div style="background: white; padding: 3px; border-radius: 3px;">ğŸšŒ ${station.stationName}</div>`
                            });
                        });
                    }
                    // ğŸš‡ ì§€í•˜ì² : ë¹¨ê°„ìƒ‰ ê²½ë¡œ
                    else if (leg.mode === "SUBWAY") {
                        new Tmapv2.Polyline({
                            path: legPath,
                            strokeColor: "#FF0000",
                            strokeWeight: 5,
                            map: map
                        });

                        // ğŸš‰ ì§€í•˜ì² ì—­ ë§ˆì»¤ ì¶”ê°€
                        new Tmapv2.Marker({
                            position: new Tmapv2.LatLng(parseFloat(leg.start.lat), parseFloat(leg.start.lon)),
                            map: map,
                            label: `<div style="background: white; padding: 3px; border-radius: 3px;">ğŸš‰ ${leg.start.name}</div>`
                        });

                        new Tmapv2.Marker({
                            position: new Tmapv2.LatLng(parseFloat(leg.end.lat), parseFloat(leg.end.lon)),
                            map: map,
                            label: `<div style="background: white; padding: 3px; border-radius: 3px;">ğŸš‰ ${leg.end.name}</div>`
                        });
                    }
                });
            } else {
                console.error("ê²½ë¡œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }
        })
        .catch(error => console.error("API í˜¸ì¶œ ì˜¤ë¥˜:", error));
    </script>
</body>
</html>
 